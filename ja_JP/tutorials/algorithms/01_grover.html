


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja-JP" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja-JP" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>グローバーのアルゴリズムと振幅増幅 &mdash; Qiskit 0.23.1 ドキュメント</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme-override.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-variables.ade9f9d55df9d2893fc676ecd59723a1.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://qiskit.org/learn" target="_blank">Learning Resources</a>
          </li>

          <li>
            <a href="https://qiskit.slack.com" target="_blank">Slack Support</a>
          </li>

          <li>
            <a href="https://quantum-computing.ibm.com/" target="_blank">IBM Quantum Experience</a>
          </li>

          <li>
            <a href="https://github.com/Qiskit/" target="_blank">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../qc_intro.html">量子コンピューティングの概要</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Qiskitのインストール</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Qiskit 入門</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the_elements.html">Qiskit の要素</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_strategy.html">開発ストラテジー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing_to_qiskit.html">Qiskit に貢献する</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">リリースノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">ローカル構成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">よくある質問</a></li>
</ul>
<p class="caption"><span class="caption-text">チュートリアル</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../circuits/index.html">回路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../circuits_advanced/index.html">高度な回路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulators/index.html">ハイパフォーマンス・シミュレーター</a></li>
<li class="toctree-l1"><a class="reference internal" href="../noise/index.html">量子システムエラー解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization/index.html">数理最適化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../finance/index.html">金融</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chemistry/index.html">化学</a></li>
</ul>
<p class="caption"><span class="caption-text">ライブラリ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/circuit_library.html">サーキット・ライブラリ</a></li>
</ul>
<p class="caption"><span class="caption-text">API リファレンス</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/terra.html">Qiskit Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aer.html">Qiskit Aer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ignis.html">Qiskit Ignis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aqua.html">Qiskit Aqua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ibmq-provider.html">Qiskit IBM Quantum プロバイダー</a></li>
</ul>
<p class="caption"><span class="caption-text">トラブルシューティング</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://quantum-computing.ibm.com/docs/cloud/errors">Quantum Experience API エラーコード一覧</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>グローバーのアルゴリズムと振幅増幅</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/algorithms/01_grover.ipynb" rel="nofollow"><img src="../../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>このページは  <a class="reference external" href="https://github.com/Qiskit/qiskit-tutorials/blob/master/tutorials/algorithms/01_grover.ipynb">tutorials/algorithms/01_grover.ipynb</a> から生成されました。</p>
<p><a class="reference external" href="https://quantum-computing.ibm.com/jupyter/tutorial/algorithms/01_grover.ipynb">IBM Quantum lab</a> でインタラクティブに実行します。</p>
</div>
<div class="section" id="グローバーのアルゴリズムと振幅増幅">
<h1>グローバーのアルゴリズムと振幅増幅<a class="headerlink" href="#グローバーのアルゴリズムと振幅増幅" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>グローバーのアルゴリズムは、1996年にロブ・グローバーによって導入された最も有名な量子アルゴリズムの1つです [1] 。これは当初、非構造化検索の問題、つまり非構造化データベースでマークされた要素を見つけるために提案されました。ただし、グローバーのアルゴリズムは、グローバー適応検索 [2] などの他のいくつかのアルゴリズムのサブルーチンになりました。グローバーのアルゴリズムの詳細については、Qiskitの教科書の <a class="reference external" href="https://qiskit.org/textbook/ch-algorithms/grover.html">グローバーのアルゴリズム</a> を参照してください。</p>
<p>Qiskitは、 <code class="docutils literal notranslate"><span class="pre">Grover</span></code> クラスにGroverのアルゴリズムを実装します。 このクラスには、一般化されたバージョンである振幅増幅 [3] も含まれており、個々の反復やその他のメタ設定をグローバーのアルゴリズムに設定できます。</p>
<p><strong>参考文献：</strong></p>
<p>the Theory of Computing (STOC) 1996, pp. 212-219.</p>
<p><a class="reference external" href="https://arxiv.org/abs/1912.04088">https://arxiv.org/abs/1912.04088</a></p>
<p>[3]: Brassard, G., Hoyer, P., Mosca, M., &amp; Tapp, A. (2000). Quantum Amplitude Amplification and Estimation. <a class="reference external" href="http://arxiv.org/abs/quant-ph/0005055">http://arxiv.org/abs/quant-ph/0005055</a></p>
<div class="section" id="グローバーのアルゴリズム">
<h2>グローバーのアルゴリズム<a class="headerlink" href="#グローバーのアルゴリズム" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>グローバーのアルゴリズムは、グローバー演算子 <span class="math notranslate nohighlight">\(\mathcal{Q}\)</span> を使用して、良好な状態の振幅を増幅します。</p>
<div class="math notranslate nohighlight">
\[\mathcal{Q} = \mathcal{A}\mathcal{S_0}\mathcal{A}^\dagger \mathcal{S_f}\]</div>
<p>ここでは、　・ <span class="math notranslate nohighlight">\(\mathcal{A}\)</span> は、アルゴリズムの初期検索状態です。これは、アダマール、教科書のグローバー検索の場合は <span class="math notranslate nohighlight">\(H^{\otimes n}\)</span> ですが、振幅増幅の場合はさらに複雑になる可能性があります。　・ <span class="math notranslate nohighlight">\(\mathcal{S_0}\)</span> は、すべて0の状態に関する反映です。</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{split}|x\rangle \mapsto \begin{cases} -|x\rangle, &amp;x \neq 0 \\ |x\rangle, &amp;x = 0\end{cases}\end{split}\\\* :math:`\mathcal{S_f}` は次を適用したオラクルです。\end{aligned}\end{align} \]</div>
<div class="math notranslate nohighlight">
\[ここで、 :math:`x` が良好な状態の場合、 :math:`f(x)` は1であり、それ以外の場合は0です。\]</div>
<p>一言で言えば、グローバーのアルゴリズムは異なる <span class="math notranslate nohighlight">\(\mathcal{Q}\)</span> の累乗を適用し、各実行後に適切な解が見つかったかどうかをチェックします。</p>
<div class="section" id="グローバーのアルゴリズムの実行">
<h3>グローバーのアルゴリズムの実行<a class="headerlink" href="#グローバーのアルゴリズムの実行" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Grover</span></code> クラスでGroverのアルゴリズムを実行するには、まず、Groverのアルゴリズムの回路にオラクルを指定する必要があります。次の例では、グローバーのアルゴリズムのオラクルとして <code class="docutils literal notranslate"><span class="pre">QuantumCircuit</span></code> を使用しています。 ただし、グローバーのアルゴリズムのオラクルとして使用できるクラスは他にもいくつかあります。 これらについては、このチュートリアルの後半で説明します。</p>
<p><code class="docutils literal notranslate"><span class="pre">Grover</span></code> マッシュのオラクルは <em>フェーズフリップ</em> オラクルであることに注意してください。 つまり、「良好な状態」の振幅に <span class="math notranslate nohighlight">\(-1\)</span> の係数を掛けます。 <em>ビットフリップ</em> オラクルをフェーズフリップオラクルに変換する方法については、後で説明します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="kn">from</span> <span class="nn">qiskit.aqua.algorithms</span> <span class="kn">import</span> <span class="n">Grover</span>

<span class="c1"># the state we desire to find is &#39;11&#39;</span>
<span class="n">good_state</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">]</span>

<span class="c1"># specify the oracle that marks the state &#39;11&#39; as a good solution</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># define Grover&#39;s algorithm</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="n">good_state</span><span class="p">)</span>

<span class="c1"># now we can have a look at the Grover operator that is used in running the algorithm</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">grover_operator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
            ┌───┐┌───┐          ┌───┐┌───┐
state_0: ─■─┤ H ├┤ X ├───────■──┤ X ├┤ H ├─────
          │ ├───┤├───┤┌───┐┌─┴─┐├───┤├───┤┌───┐
state_1: ─■─┤ H ├┤ X ├┤ H ├┤ X ├┤ H ├┤ X ├┤ H ├
            └───┘└───┘└───┘└───┘└───┘└───┘└───┘
</pre></div></div>
</div>
<p>次に、バックエンドを指定し、バックエンドを使用して <code class="docutils literal notranslate"><span class="pre">Grover</span></code> の <code class="docutils literal notranslate"><span class="pre">run</span></code> メソッドを呼び出して回路を実行します。 返される結果タイプは <code class="docutils literal notranslate"><span class="pre">GroverResult</span></code> です。</p>
<p>検索が成功した場合、結果の <code class="docutils literal notranslate"><span class="pre">oracle_evaluation</span></code> 属性はTrueになります。この場合、最もサンプリングされた測定値 <code class="docutils literal notranslate"><span class="pre">top_measurement</span></code> は、「良好な状態」の1つです。 それ以外の場合、 <code class="docutils literal notranslate"><span class="pre">oracle_evaluation</span></code> はFalseになります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">Aer</span>
<span class="kn">from</span> <span class="nn">qiskit.aqua</span> <span class="kn">import</span> <span class="n">QuantumInstance</span>

<span class="n">qasm_simulator</span> <span class="o">=</span> <span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">grover</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">quantum_instance</span><span class="o">=</span><span class="n">qasm_simulator</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Result type:&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">oracle_evaluation</span> <span class="k">else</span> <span class="s1">&#39;Failure!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top measurement:&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">top_measurement</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Result type: &lt;class &#39;qiskit.aqua.algorithms.amplitude_amplifiers.grover.GroverResult&#39;&gt;

Success!
Top measurement: 11
</pre></div></div>
</div>
<p>この例では、 <code class="docutils literal notranslate"><span class="pre">top_measurement</span></code> の結果は11であり、これは「良好な状態」の1つです。したがって、 <code class="docutils literal notranslate"><span class="pre">Grover</span></code> を使用して答えを見つけることに成功しました。</p>
</div>
<div class="section" id="Grover-のオラクルとしてさまざまなタイプのクラスを使用する">
<h3><code class="docutils literal notranslate"><span class="pre">Grover</span></code> のオラクルとしてさまざまなタイプのクラスを使用する<a class="headerlink" href="#Grover-のオラクルとしてさまざまなタイプのクラスを使用する" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>上記の例では、 <code class="docutils literal notranslate"><span class="pre">Grover</span></code> のオラクルとして <code class="docutils literal notranslate"><span class="pre">QuantumCircuit</span></code> を使用しました。しかしながら、 <code class="docutils literal notranslate"><span class="pre">qiskit.aqua.components.oracles.Oracle</span></code> および <code class="docutils literal notranslate"><span class="pre">qiskit.quantum_info.Statevector</span></code> をオラクルとして使用することもできます。以下のすべての例は、 <span class="math notranslate nohighlight">\(|11\rangle\)</span> が「良好な状態」の場合です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.quantum_info</span> <span class="kn">import</span> <span class="n">Statevector</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">Statevector</span><span class="o">.</span><span class="n">from_label</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">])</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">grover</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">quantum_instance</span><span class="o">=</span><span class="n">qasm_simulator</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Result type:&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">oracle_evaluation</span> <span class="k">else</span> <span class="s1">&#39;Failure!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top measurement:&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">top_measurement</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Result type: &lt;class &#39;qiskit.aqua.algorithms.amplitude_amplifiers.grover.GroverResult&#39;&gt;

Success!
Top measurement: 11
</pre></div></div>
</div>
<p>内部的には、状態ベクトルが量子回路にマッピングされます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">grover_operator</span><span class="o">.</span><span class="n">oracle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
     ┌────────────┐
q_0: ┤0           ├─────────────
     │  UCRZ(0,π) │┌───────────┐
q_1: ┤1           ├┤ UCRZ(π/2) ├
     └────────────┘└───────────┘
</pre></div></div>
</div>
<p>Qiskit Aquaの <code class="docutils literal notranslate"><span class="pre">Oracle</span></code> コンポーネントを使用すると、より複雑なオラクルを簡単に構築できます。 <code class="docutils literal notranslate"><span class="pre">Oracle</span></code> タイプには、興味深いサブクラスがあります。　・ <code class="docutils literal notranslate"><span class="pre">LogicalExpressionOracle</span></code> ： <code class="docutils literal notranslate"><span class="pre">'~a</span> <span class="pre">|</span> <span class="pre">b'</span></code> などの論理式を解析するためのものです。これは、3-SAT問題を解決するのに特に役立ちます（ <a class="reference external" href="https://github.com/qiskit-community/qiskit-community-tutorials/blob/master/optimization/grover.ipynb">Qiskit-community-tutorialsでグローバーのアルゴリズムを使用して量子検索を実行する</a> を参照）。　・ <code class="docutils literal notranslate"><span class="pre">TrutheTableOracle</span></code> ：バイナリ真理値表を回路に変換するためのものです。</p>
<p>ここでは、 <code class="docutils literal notranslate"><span class="pre">LogicalExpressionOracle</span></code> を使用して、 <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">&amp;</span> <span class="pre">b'</span></code> に対応する状態 <span class="math notranslate nohighlight">\(|11\rangle\)</span> を見つける簡単な例を示します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.aqua.components.oracles</span> <span class="kn">import</span> <span class="n">LogicalExpressionOracle</span>

<span class="c1"># `Oracle` (`LogicalExpressionOracle`) as the `oracle` argument</span>
<span class="n">expression</span> <span class="o">=</span> <span class="s1">&#39;(a &amp; b)&#39;</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">LogicalExpressionOracle</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">grover_operator</span><span class="o">.</span><span class="n">oracle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

q_0: ────────────■────────────
                 │
q_1: ────────────■────────────
     ┌───┐┌───┐┌─┴─┐┌───┐┌───┐
q_2: ┤ X ├┤ H ├┤ X ├┤ H ├┤ X ├
     └───┘└───┘└───┘└───┘└───┘
</pre></div></div>
</div>
<p>このオラクルは実際には2量子ビットではなく3量子ビットで実装されていることがわかります。</p>
<p>これは、 <code class="docutils literal notranslate"><span class="pre">LogicalExpressionOracle</span></code> がフェーズフリップオラクル（良好な状態のフェーズをフリップする）ではなく、ビットフリップオラクルであるためです。これは、他の量子ビットが条件を満たす場合、補助量子ビットの状態を反転することを意味します。ただし、グローバーのアルゴリズムでは、位相反転オラクルが必要です。ビットフリップオラクルをフェーズフリップオラクルに変換するために、上記の回路でわかるように、 <span class="math notranslate nohighlight">\(X\)</span> および <span class="math notranslate nohighlight">\(H\)</span> ゲートによって制御されたものではありません。</p>
<p><strong>注記：</strong> ビットフリップからフェーズフリップのオラクルへのこの変換は一般的なものである、これを使用してオラクルを正しい表現に変換できます。</p>
</div>
</div>
<div class="section" id="振幅増幅">
<h2>振幅増幅<a class="headerlink" href="#振幅増幅" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>グローバーのアルゴリズムは、アダマールゲートを使用して、グローバー演算子 <span class="math notranslate nohighlight">\(\mathcal{Q}\)</span> の先頭にあるすべての状態の均一な重ね合わせを作成します。 良好な状態に関する情報が利用できる場合は、均一な重ね合わせから開始せず、特定の状態のみを初期化すると便利な場合があります。 この一般化されたバージョンのグローバーのアルゴリズムは、 <em>振幅増幅（Amplitude Amplification）</em> と呼ばれます。</p>
<p>Qiskitでは、 <code class="docutils literal notranslate"><span class="pre">state_preparation</span></code> 引数を設定することで、初期の重ね合わせ状態を簡単に調整できます。</p>
<div class="section" id="状態の準備（State-preparation）">
<h3>状態の準備（State preparation）<a class="headerlink" href="#状態の準備（State-preparation）" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">state_preparation</span></code> 引数は、振幅増幅の開始点の量子状態を準備する量子回路を指定するために使用されます。デフォルトでは、 $H^{<span class="math">\otimes `n} $ の回路を使用して、均一な重ね合わせを準備します（したがって、Groverの検索になります）。 振幅増幅の拡散回路は、 ``state_preparation`</span> を自動的に反映します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Specifying `state_preparation`</span>
<span class="c1"># to prepare a superposition of |01&gt;, |10&gt;, and |11&gt;</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">ccx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">state_preparation</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">state_preparation</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">state_preparation</span><span class="o">.</span><span class="n">ch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">state_preparation</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">state_preparation</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># we only care about the first two bits being in state 1, thus add both possibilities for the last qubit</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">state_preparation</span><span class="o">=</span><span class="n">state_preparation</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;110&#39;</span><span class="p">,</span> <span class="s1">&#39;111&#39;</span><span class="p">])</span>

<span class="c1"># state_preparation</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;state preparation circuit:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">grover_operator</span><span class="o">.</span><span class="n">state_preparation</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
state preparation circuit:
     ┌────────────┐
q_0: ┤ RY(1.9106) ├──■───────
     └────────────┘┌─┴─┐┌───┐
q_1: ──────────────┤ H ├┤ X ├
         ┌───┐     └───┘└───┘
q_2: ────┤ H ├───────────────
         └───┘
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">grover</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">quantum_instance</span><span class="o">=</span><span class="n">qasm_simulator</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">oracle_evaluation</span> <span class="k">else</span> <span class="s1">&#39;Failure!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top measurement:&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">top_measurement</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Success!
Top measurement: 111
</pre></div></div>
</div>
</div>
<div class="section" id="完全な柔軟性">
<h3>完全な柔軟性<a class="headerlink" href="#完全な柔軟性" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>より高度な使用法として、 <code class="docutils literal notranslate"><span class="pre">grover_operator</span></code> 引数を設定することにより、グローバー演算子全体を指定することもできます。 これは、ゼロリフレクション、オラクル、および状態の準備によるデフォルトの構築よりも <span class="math notranslate nohighlight">\(\mathcal{Q}\)</span> のより効率的な実装を知っている場合に役立つ可能性があります。</p>
<p><code class="docutils literal notranslate"><span class="pre">qiskit.circuit.library.GroverOperator</span></code> は良い出発点であり、Groverオペレーターの自動構築のためのより多くのオプションを提供します。 あなたは例えば次のようにすることができます。　・mcx_modeを設定します。　・ <code class="docutils literal notranslate"><span class="pre">Reflection_qubits</span></code> を設定して、ゼロ反射の量子ビットを無視します。　・ <code class="docutils literal notranslate"><span class="pre">oracle</span></code> 、 <code class="docutils literal notranslate"><span class="pre">zero_reflection</span></code> 、 <code class="docutils literal notranslate"><span class="pre">state_preparation</span></code> 引数を使用して、 <span class="math notranslate nohighlight">\(\mathcal{S_f} 、 \mathcal{S_0}\)</span> および <span class="math notranslate nohighlight">\(\mathcal{A}\)</span> 演算を明示的に交換します。</p>
<p>たとえば、良好な状態が3量子ビット状態 <span class="math notranslate nohighlight">\(|111\rangle\)</span> であると想像してください。ただし、補助量子ビットとして2つの追加量子ビットを使用しました。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">GroverOperator</span><span class="p">,</span> <span class="n">ZGate</span>

<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ZGate</span><span class="p">()</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oracle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

q_0: ─■─
      │
q_1: ─■─
      │
q_2: ─■─

q_3: ───

q_4: ───

</pre></div></div>
</div>
<p>次に、デフォルトで、グローバー演算子は5つの量子ビットすべてにゼロ反射を実装します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grover_op</span> <span class="o">=</span> <span class="n">GroverOperator</span><span class="p">(</span><span class="n">oracle</span><span class="p">,</span> <span class="n">insert_barriers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover_op</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
             ░ ┌───┐ ░ ┌───┐          ┌───┐      ░ ┌───┐
state_0: ─■──░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
          │  ░ ├───┤ ░ ├───┤       │  ├───┤      ░ ├───┤
state_1: ─■──░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
          │  ░ ├───┤ ░ ├───┤       │  ├───┤      ░ ├───┤
state_2: ─■──░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
             ░ ├───┤ ░ ├───┤       │  ├───┤      ░ ├───┤
state_3: ────░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
             ░ ├───┤ ░ ├───┤┌───┐┌─┴─┐├───┤┌───┐ ░ ├───┤
state_4: ────░─┤ H ├─░─┤ X ├┤ H ├┤ X ├┤ H ├┤ X ├─░─┤ H ├
             ░ └───┘ ░ └───┘└───┘└───┘└───┘└───┘ ░ └───┘
</pre></div></div>
</div>
<p>しかし、最初の3つだけを考慮する必要があることはわかっています。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grover_op</span> <span class="o">=</span> <span class="n">GroverOperator</span><span class="p">(</span><span class="n">oracle</span><span class="p">,</span> <span class="n">reflection_qubits</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">insert_barriers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover_op</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
             ░ ┌───┐ ░ ┌───┐          ┌───┐      ░ ┌───┐
state_0: ─■──░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
          │  ░ ├───┤ ░ ├───┤       │  ├───┤      ░ ├───┤
state_1: ─■──░─┤ H ├─░─┤ X ├───────■──┤ X ├──────░─┤ H ├
          │  ░ ├───┤ ░ ├───┤┌───┐┌─┴─┐├───┤┌───┐ ░ ├───┤
state_2: ─■──░─┤ H ├─░─┤ X ├┤ H ├┤ X ├┤ H ├┤ X ├─░─┤ H ├
             ░ └───┘ ░ └───┘└───┘└───┘└───┘└───┘ ░ └───┘
state_3: ────░───────░───────────────────────────░──────
             ░       ░                           ░
state_4: ────░───────░───────────────────────────░──────
             ░       ░                           ░
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="グローバーの他の引数に飛び込む">
<h2>グローバーの他の引数に飛び込む<a class="headerlink" href="#グローバーの他の引数に飛び込む" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Grover</span></code> には、 <code class="docutils literal notranslate"><span class="pre">oracle</span></code> と <code class="docutils literal notranslate"><span class="pre">state_preparation</span></code> 以外の引数があります。 このセクションではそれらについて説明します。</p>
<div class="section" id="good_state-の指定">
<h3><code class="docutils literal notranslate"><span class="pre">good_state</span></code> の指定<a class="headerlink" href="#good_state-の指定" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">good_state</span></code> は、測定結果が内部的に正しいかどうかを確認するために使用されます。バイナリ文字列のリスト、整数、 <code class="docutils literal notranslate"><span class="pre">Statevector</span></code> 、およびCallableのリストにすることができます。入力がビット文字列のリストである場合、リスト内の各ビット文字列は良好な状態を表します。入力が整数のリストである場合、各整数は <span class="math notranslate nohighlight">\(|1\rangle\)</span> である良好な状態のインデックスを表します。 それが <code class="docutils literal notranslate"><span class="pre">Statevector</span></code> である場合、それはすべての良好な状態の重ね合わせを表します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># a list of binary strings good state</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">good_state</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">,</span> <span class="s1">&#39;00&#39;</span><span class="p">]</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="n">good_state</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">is_good_state</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># a list of integer good state</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">good_state</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="n">good_state</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">is_good_state</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.quantum_info</span> <span class="kn">import</span> <span class="n">Statevector</span>

<span class="c1"># `Statevector` good state</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">good_state</span> <span class="o">=</span> <span class="n">Statevector</span><span class="o">.</span><span class="n">from_label</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="n">good_state</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">is_good_state</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Callable good state</span>
<span class="k">def</span> <span class="nf">callable_good_state</span><span class="p">(</span><span class="n">bitstr</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bitstr</span> <span class="o">==</span> <span class="s2">&quot;11&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="n">callable_good_state</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grover</span><span class="o">.</span><span class="n">is_good_state</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
</div>
<div class="section" id="iterations-の回数">
<h3><code class="docutils literal notranslate"><span class="pre">iterations</span></code> の回数<a class="headerlink" href="#iterations-の回数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>グローバーのアルゴリズムで正しい結果を得るには、グローバー演算子の適用の繰り返し回数が重要です。 反復回数は、 <code class="docutils literal notranslate"><span class="pre">Grover</span></code> の <code class="docutils literal notranslate"><span class="pre">iteration</span></code> 引数で設定できます。 次の入力がサポートされています。　・適用されるグローバー演算子の1乗を指定する整数　・または整数のリスト。グローバー演算子のこれらのさまざまな累乗がすべて連続して実行され、毎回正しい解が見つかったかどうかを確認します。</p>
<p>さらに、 <code class="docutils literal notranslate"><span class="pre">sample_from_iterations</span></code> 引数があります。 <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、 <code class="docutils literal notranslate"><span class="pre">iterations</span></code> の特定の累乗の代わりに、0と <code class="docutils literal notranslate"><span class="pre">iteration</span></code> の値の間のランダムな整数が累乗グローバーの演算子として使用されます。 このアプローチは、ソリューションの数さえわからない場合に役立ちます。</p>
<p><code class="docutils literal notranslate"><span class="pre">sample_from_iterations</span></code> を使用したアルゴリズムの詳細については、[4]を参照してください。</p>
<p><strong>参考文献：</strong></p>
<p>[4]: Boyer et al., Tight bounds on quantum searching <a class="reference external" href="https://arxiv.org/abs/quant-ph/9605034">arxiv:quant-ph/9605034</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># integer iteration</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">],</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># list iteration</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">],</span> <span class="n">iterations</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># using sample_from_iterations</span>
<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">],</span> <span class="n">iterations</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">sample_from_iterations</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>解の数がわかっている場合は、静的メソッド <code class="docutils literal notranslate"><span class="pre">optimal_num_iterations</span></code> を使用して、最適な反復回数を見つけることもできます。出力の反復は概算値であることに注意してください。量子ビットの数が少ない場合、出力の反復が最適でない場合があります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">iterations</span> <span class="o">=</span> <span class="n">Grover</span><span class="o">.</span><span class="n">optimal_num_iterations</span><span class="p">(</span><span class="n">num_solutions</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_qubits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">iterations</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
12
</pre></div></div>
</div>
</div>
<div class="section" id="post_processing-を適用する">
<h3><code class="docutils literal notranslate"><span class="pre">post_processing</span></code> を適用する<a class="headerlink" href="#post_processing-を適用する" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>オプションの後処理を上部の測定に適用して、読みやすくすることができます。これは、測定値のビット表現 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">1]</span></code> からDIMACS CNF形式 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">-2,</span> <span class="pre">3]</span></code> に変換するための例として使用できます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">to_DIAMACS_CNF_format</span><span class="p">(</span><span class="n">bit_rep</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span> <span class="k">if</span> <span class="n">val</span><span class="o">==</span><span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bit_rep</span><span class="p">)]</span>

<span class="n">oracle</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oracle</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">grover</span> <span class="o">=</span> <span class="n">Grover</span><span class="p">(</span><span class="n">oracle</span><span class="o">=</span><span class="n">oracle</span><span class="p">,</span> <span class="n">good_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">],</span><span class="n">post_processing</span><span class="o">=</span><span class="n">to_DIAMACS_CNF_format</span><span class="p">)</span>
<span class="n">grover</span><span class="o">.</span><span class="n">post_processing</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, -2, 3]
</pre></div></div>
</div>
</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Qiskit Development Team.
      最終更新: 2020/11/30

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">グローバーのアルゴリズムと振幅増幅</a><ul>
<li><a class="reference internal" href="#グローバーのアルゴリズム">グローバーのアルゴリズム</a><ul>
<li><a class="reference internal" href="#グローバーのアルゴリズムの実行">グローバーのアルゴリズムの実行</a></li>
<li><a class="reference internal" href="#Grover-のオラクルとしてさまざまなタイプのクラスを使用する"><code class="docutils literal notranslate"><span class="pre">Grover</span></code> のオラクルとしてさまざまなタイプのクラスを使用する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#振幅増幅">振幅増幅</a><ul>
<li><a class="reference internal" href="#状態の準備（State-preparation）">状態の準備（State preparation）</a></li>
<li><a class="reference internal" href="#完全な柔軟性">完全な柔軟性</a></li>
</ul>
</li>
<li><a class="reference internal" href="#グローバーの他の引数に飛び込む">グローバーの他の引数に飛び込む</a><ul>
<li><a class="reference internal" href="#good_state-の指定"><code class="docutils literal notranslate"><span class="pre">good_state</span></code> の指定</a></li>
<li><a class="reference internal" href="#iterations-の回数"><code class="docutils literal notranslate"><span class="pre">iterations</span></code> の回数</a></li>
<li><a class="reference internal" href="#post_processing-を適用する"><code class="docutils literal notranslate"><span class="pre">post_processing</span></code> を適用する</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> 表示</span>
    lang: Japanese
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>言語</dt>
      
        <dd><a class="version" href="/documentation/tutorials/algorithms/01_grover.html">English</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ja_JP/tutorials/algorithms/01_grover.html">Japanese</a></dd>
      
        <dd><a class="version" href="/documentation/locale/de_DE/tutorials/algorithms/01_grover.html">German</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ko_KR/tutorials/algorithms/01_grover.html">Korean</a></dd>
      
    </dl>
    
  </div>
  <script>
    jQuery('.version').click((evt) => {
      const hash = window.location.hash
      const complete_url = evt.target.href + hash
      window.location = complete_url
      evt.preventDefault()
    })
  </script>
</div>

  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
         <script src="../../_static/jquery.js"></script>
         <script src="../../_static/underscore.js"></script>
         <script src="../../_static/doctools.js"></script>
         <script src="../../_static/language_data.js"></script>
         <script src="../../_static/thebelab-helper.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0-alpha.0/dist/embed-amd.js"></script>
         <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
         <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
     

  

  <script type="text/javascript" src="../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

<div class="cookie-banner-wrapper">
  <div class="container">
    <p class="gdpr-notice">To analyze traffic and optimize your experience, we serve cookies on this site. By clicking or navigating, you agree to allow our usage of cookies. As the current maintainers of this site, Facebook’s Cookies Policy applies. Learn more, including about available controls: <a href="https://www.facebook.com/policies/cookies/">Cookies Policy</a>.</p>
    <img class="close-button" src="../../_static/images/pytorch-x.svg">
  </div>
</div>

  <div>
    <br>
  </div>

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://qiskit.org/learn" target="_blank">Learning Resources</a>
          </li>

          <li>
            <a href="https://qiskit.slack.com" target="_blank">Slack Support</a>
          </li>

          <li>
            <a href="https://quantum-computing.ibm.com/" target="_blank">IBM Quantum Experience</a>
          </li>

          <li>
            <a href="https://github.com/Qiskit/" target="_blank">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>